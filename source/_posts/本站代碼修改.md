---
title: 本站代碼修改
date: 2023-08-20 21:51:31
tags: [Hexo, Javascript]
top: 1
---

# <i class="bi bi-book"></i> Hexo 原始碼

Hexo 主題採用zhaoo：

[Hexo-theme-zhaoo](https://github.com/zhaoo/hexo-theme-zhaoo)


# <i class="bi bi-book"></i> 引入iconmoon css

為了在網站footer加入linkedin icon <div class=icon-linkedin-with-circle></div>
在theme/zhaoo/source/css 加上fonts.css
這個css是iconmoon的css
並且更更改theme/zhaoo/config.yml裡的custom

```markdown
custom:
  head:
  foot:
  css: css/fonts.css
  js: 
```

# <i class="bi bi-book"></i> 在關於頁面加入計時器

因為在markdown文件直接寫javascript有時候不會執行，所以改為引入clock.js檔，此檔為事先寫好的計時器，計算建站日期

```html
<body>
	<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
	<div class="time"></div>		
	<script src="./clock.js"></script>
</body>
```

clock.js 代碼

```javascript
var showTime = document.querySelector('.time');
getDate();
window.setInterval(getDate,1000);

function getDate(){
	var date2 = + new Date();
	var date4 = + new Date(2021, 03, 16, 18, 40, 41);

	var date_count = date2 - date4;
	var t_second = date_count/1000;
	var d = parseInt(t_second/60/60/24);
	var h = parseInt(t_second/60/60%24);
	var m = parseInt(t_second/60&60);
	var s = parseInt(t_second%60);

	d = d < 10 ? '0'+d : d;
	h = h < 10 ? '0'+h : h;
	m = m < 10 ? '0'+m : m;
	s = s < 10 ? '0'+s : s;
	showTime.innerText = '建站時至今日: ' + d + '天' + h + '時' + m + '分' + s + '秒';
}
```

# <i class="bi bi-book"></i> 引入bootstrap

在theme/zhaoo/layout/partial/head.ejs 加上

```ejs
 <% if (theme.vendors.bootstap_css) { %>
  	<%- css(theme.vendors.bootstap_css) %>
 <% } %>
```

config.yml 加上
```ejs
 bootstap_css: https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css
```

# <i class="bi bi-book"></i> 移除文章右側目錄的邊框

/theme/zhaoo/source/post/toc.styl
刪除overflow scroll

```css
.toc-wrap
  position fixed
  top 70px
  background-color var(--color-background)
  z-index 10
  padding 20px
  height calc(100vh - 140px)
  overflow scroll
```

# <i class="bi bi-book"></i> 解決grid模式照片點開後消失

修改 theme/zhaoo/gallery.ejs
gallery.ejs 第15行，三元表達式加上
target = blank

```ejs
images += `<a data-fancybox="images" style=${ theme.galleries.type === 'waterfall' ? `width:${(100 / (theme.galleries.columns || 3))}%` : `"target="_blank""`}
```

# <i class="bi bi-book"></i> 2023.08.21 轉移到阿里雲

因為github上傳有限制2G大小，而我的博客有很多照片，所以超出限制無法上傳，轉移到阿里雲。
在阿里雲部署的教程
[教你如何將hexo博客部署到阿里雲服務器](https://lneverl.gitee.io/posts/2092ec56.html)

目前服務器採用Intel Xeon CPU E5-2682 v4 @ 2.50GHz 1核心， 2G記憶體，5M 頻寬
